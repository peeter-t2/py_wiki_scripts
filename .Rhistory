merged_not$title[merged_not$title=="Nixie toru"]
merged_not$title[merged_not$Teema=="Nixie toru"]
View(merged_not)
merged_not <- merged_table[!grepl(paste(unique(merged_table$Teema[merged_table$Teema != "" & !is.na(merged_table$Teema)]),collapse="|"), merged_table$title),]
merged_not <- merged_not[!grepl(paste(c("Kasutaja","Vikipeedia"),collapse="|"), merged_not$title),]
View(merged_not)
hist(merged_not$timestamp2, "months", freq=TRUE)
plot(merged_not$timestamp2,rep(1, length(merged_not$timestamp2)), type= "h")
View(merged_not)
merge_not[,(uniques=length(unique(title))), by = Kasutaja]
merged_not[,(uniques=length(unique(title))), by = Kasutaja]
uniques_merged <- merged_not[,(uniques=length(unique(title))), by = Kasutaja]
View(uniques_merged)
un2 <- uniques_merged[uniques_merged$V1 > 1,]
View(un2)
merged_not2 <- merged_not[grepl(paste(unique(un2$Kasutaja),collapse="|"), merged_not$Kasutaja),]
View(merged_not2)
merged_not <- merged_not[!grepl(paste(c("Liivakast"),collapse="|"), merged_not$Teema),]
merged_not2 <- merged_not[grepl(paste(unique(un2$Kasutaja),collapse="|"), merged_not$Kasutaja),]
uniques_merged <- merged_not[,(uniques=length(unique(title))), by = Kasutaja]
merged_not2 <- merged_not[grepl(paste(unique(un2$Kasutaja),collapse="|"), merged_not$Kasutaja),]
View(merged_not2)
plot(merged_not2$timestamp2,rep(1, length(merged_not$timestamp2)), type= "h")
plot(merged_not2$timestamp2,rep(1, length(merged_not2$timestamp2)), type= "h")
hist(merged_not2$timestamp2, "months", freq=TRUE)
uniques_merged <- merged_not[,(uniques=length(unique(title))), by = Kasutaja]
View(uniques_merged)
d
merged.cont <- merged_not2[(merged_not2$timestamp2 < as.POSIXlt("2015-09-01") | merged_not2$timestamp2 > as.POSIXlt("2015-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2014-09-01") | merged.cont$timestamp2 > as.POSIXlt("2014-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2013-09-01") | merged.cont$timestamp2 > as.POSIXlt("2013-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2012-09-01") | merged.cont$timestamp2 > as.POSIXlt("2012-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2011-09-01") | merged.cont$timestamp2 > as.POSIXlt("2012-01-25")),]
View(merged.cont)
plot(merged_cont$timestamp2,rep(1, length(merged_not2$timestamp2)), type= "h")
plot(merged.cont$timestamp2,rep(1, length(merged.cont$timestamp2)), type= "h")
hist(merged.cont$timestamp2, "months", freq=TRUE)
merged.cont <- merged_not2[(merged_not2$timestamp2 < as.POSIXlt("2015-09-01") | merged_not2$timestamp2 > as.POSIXlt("2015-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2014-09-01") | merged.cont$timestamp2 > as.POSIXlt("2015-01-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2013-09-01") | merged.cont$timestamp2 > as.POSIXlt("2014-01-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2012-09-01") | merged.cont$timestamp2 > as.POSIXlt("2013-01-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2011-09-01") | merged.cont$timestamp2 > as.POSIXlt("2012-01-25")),]
plot(merged.cont$timestamp2,rep(1, length(merged.cont$timestamp2)), type= "h")
hist(merged.cont$timestamp2, "months", freq=TRUE)
library(scales)
library(ggplot2)
ggplot(merged.cont,aes(x=timestamp2, group=Kasutaja, fill=Kasutaja))+
stat_bin(colour="black", binwidth=1, alpha=0.5,
position="identity") + theme_bw()+
xlab("Date of onset of symptoms")+
ylab("Number of cases")+
scale_x_date(breaks=date_breaks("1 month"), labels=date_format("%b %y"))
ggplot(merged.cont,aes(x=as.POSIXlt(timestamp2), group=Kasutaja, fill=Kasutaja))+
stat_bin(colour="black", binwidth=1, alpha=0.5,
position="identity") + theme_bw()+
xlab("Date of onset of symptoms")+
ylab("Number of cases")+
scale_x_date(breaks=date_breaks("1 month"), labels=date_format("%b %y"))
library(date)
hist(dat.geo$Date_of_Onset[(dat.geo$suburb=="x")], "weeks",
format = "%d %b %y", freq=T, col=rgb(0,0,0,1), axes=F, main="")
hist(merged.cont$timestamp2, "months", freq=TRUE, axes=F)
xis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),
format="%d %b %y")
xis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),         format="%d %b %y")
install.packages("date")
library(date)
xis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),         format="%d %b %y")
library(date)
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),
format="%d %b %y")
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="2 weeks"),          format="%d %b %y")
axis.Date(1, at=seq(as.Date("2004-01-01"), as.Date("2015-12-12"), by="2 weeks"),          format="%d %b %y")
hist(merged.cont$timestamp2, "months", freq=TRUE, axes=F)
axis.Date(1, at=seq(as.Date("2004-01-01"), as.Date("2015-12-12"), by="2 weeks"),          format="%d %b %y")
labels=F, tcl= -0.5)
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="weeks"),         labels=F, tcl= -0.5)
axis.Date(1, at=seq(as.Date("2004-01-01"), as.Date("2015-12-12"), by="2 weeks"),          format="%d %b %y")
axis.Date(1, at=seq(as.Date("2011-10-10"), as.Date("2012-03-19"), by="weeks"),         labels=F, tcl= -0.5)
hist(merged.cont$timestamp2, "months", freq=TRUE, axes=F)
?hist
hist(merged.cont$timestamp2, "months", freq=TRUE, axes=F)
hist(merged.cont$timestamp2, "months", freq=TRUE, axes=T)
plot.zoo(merged.cont$timestamp2, "months", freq=TRUE, axes=T)
library(zoo)
?plot.zoo
plot.zoo(merged.cont$timestamp2, "months", freq=TRUE, axes=T)
plot.zoo(merged.cont$timestamp2)
library(zoo)
plot(as.zoo(merged.cont$timestamp2), type = "h", xaxt = "n")
axis(1, unique(floor(time(merged.cont$timestamp2))))
library(scales)
library(ggplot2)
ggplot(merged.cont, aes(x=as.Date(timestamp2))) +
stat_bin(binwidth=1, position="identity") +
scale_x_date(breaks=date_breaks(width="1 month"))
as.Date(timestamp2))
as.Date(timestamp2)
as.Date(merged.cont$timestamp2)
hist(as.Date(merged.cont$timestamp2), "months", freq=TRUE, axes=T)
hist(as.Date(merged.cont$timestamp2), "years", freq=TRUE, axes=T)
hist(as.Date(merged.cont$timestamp2), "weeks", freq=TRUE, axes=T)
contribs <- read.csv("allusers.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
View(contribs)
merged <- contribs
concise <- merged[c("Kasutaja", "Aasta", "timestamp2")]
library(data.table)
merged_table <- data.table(merged)
merged_table$timestamp3 = as.Date(strptime(merged_table$timestamp2, "%Y-%m-%dT%H:%M:%S"))
View(merged_table)
contribs$timestamp2 <- as.POSIXct(contribs$timestamp, origin="1970-01-01")
merged_table <- data.table(merged)
merged_table$timestamp3 = as.Date(strptime(merged_table$timestamp2, "%Y-%m-%dT%H:%M:%S"))
View(merged_table)
contribs <- read.csv("allusers.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
contribs$timestamp2 <- as.POSIXct(contribs$timestamp, origin="1970-01-01")
merged <- contribs
merged_table <- data.table(merged)
merged_table$timestamp3 = as.Date(strptime(merged_table$timestamp2, "%Y-%m-%dT%H:%M:%S"))
plot(merged_table$timestamp2,rep(1, length(merged_table$timestamp2)), type= "h")
merged$zoo_time <-zoo(merged$timestamp2)
library(zoo)
merged$zoo_time <-zoo(merged$timestamp2)
View(merged)
View(merged)
rollapply((merged, FUN = unique(user)))
rollapply((merged$timestamp, FUN = unique(merged$user)))
rollapply(merged$timestamp, 1, FUN = unique(merged$user))
merged$user
unique(merged$user)
table <- data.frame(timestamp = c(1,3,4,6), category= c("one", "two", "one", "one"))
View(table)
data.zoo<- zoo(merged$user, merged$zoo_time)
z <- read.zoo(merged)
z <- zoo(merged)
rollapply(z, 3, function(x) unique(x["user"]), by.column = FALSE,   align = "left")
unique(merged$user)
?unique
len(unique(merged$user))
length(unique(merged$user))
rollapply(z, 3, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
table <- data.frame(timestamp = c(1,3,4,6), category= c("one", "two", "one", "one"))
data.zoo<- zoo(table)#zoo(merged$user, merged$zoo_time)
rollapply(data.zoo, 3, function(x) length(unique(x["category"])), by.column = FALSE,   align = "left")
data.zoo<- zoo(merged$zoo_time, merged$user)
?zoo
data.zoo<- zoo(merged$user, merged$zoo_time)
rollapply(data.zoo, 3, function(x) length(unique(x["category"])), by.column = FALSE,   align = "left")
rollapply(data.zoo, 3, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
rollapply(data.zoo, 30000000, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
data.zoo<- zoo(merged$user, merged$timestamp2)
rollapply(data.zoo, 30, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo, 30, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
rollapply(data.zoo, 3, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
data.zoo<- zoo(merged$user, merged$timestamp2)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo, 3, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
data.zoo
table <- data.frame(timestamp = c(1,1,1,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rollapply(data.zoo, 3, function(x) length(unique(x["category"])), by.column = FALSE,   align = "left")
rollapply(table$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
library(zoo)
rollapply(table$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(merged$user, merged$timestamp2)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), by.column = FALSE,   align = "left")
data.zoo$user
rollapply(merged$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
rolled <- rollapply(merged$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
plot(merged_table$timestamp2,rep(1, length(merged_table$timestamp2)), type= "h")
rolled <- rollapply(merged$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
merged$timestamp
get(merged$timestamp)
gput(merged$timestamp)
put(merged$timestamp)
dput(merged$timestamp)
data.zoo<- zoo(merged$user, merged$timestamp2)
time(data.zoo) <- as.yearmon(time(data.zoo))
rolled <- rollapply(merged$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
merged$user
merged$user
levels(merged$user) <- c("A","B","C","D","E","F","G","H","I","J","K","A","B","C","D","E")
dput(merged$user)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
table <- data.frame(timestamp = c(1,1,1,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
contribs <- read.csv("allusers_20.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
contribs$timestamp2 <- as.POSIXct(contribs$timestamp, origin="1970-01-01")
merged <- contribs
library(data.table)
merged_table <- data.table(merged)
merged_table$timestamp3 = as.Date(strptime(merged_table$timestamp2, "%Y-%m-%dT%H:%M:%S"))
plot(merged$timestamp2[merged$Aasta == 2012],rep(1, length(merged$timestamp2[merged$Aasta == 2012])), type= "h")
plot(merged$timestamp2[merged$Aasta == 2013],rep(1, length(merged$timestamp2[merged$Aasta == 2013])), type= "h")
library(zoo)
plot(merged_table$timestamp2,rep(1, length(merged_table$timestamp2)), type= "h")
axis.Date(1,at=merged_table$timestamp3,labels=format(merged_table$timestamp3,"%b-%d"),las=2)
plot(merged$timestamp2,rep(1, length(merged$timestamp2)), type= "h")
merged[merged$timestamp2 < 2010]
merged$timestamp2[1]
plot(merged$timestamp2[merged$Aasta == 2012],rep(1, length(merged$timestamp2[merged$Aasta == 2012])), type= "h")
plot(merged$timestamp2[merged$Aasta == 2013],rep(1, length(merged$timestamp2[merged$Aasta == 2013])), type= "h")
plot(merged$timestamp2[merged$Aasta == 2014],rep(1, length(merged$timestamp2[merged$Aasta == 2014])), type= "h")
plot(merged$timestamp2[merged$Aasta == 2015],rep(1, length(merged$timestamp2[merged$Aasta == 2015])), type= "h")
hist(merged$timestamp2[merged$Aasta == 2012], "months")
#aets <- as.xts(read.zoo("n8_energy_actual2009_2010.csv", header=TRUE, sep=",", FUN=as.POSIXct))
merged$zoo_time <-zoo(merged$timestamp2)
merged.2010 <- merged$zoo_time["2010-01::2010-10"]
merged.2015 <- merged[merged$timestamp2 >= as.POSIXlt("2015-10-01") & merged$timestamp2 < as.POSIXlt("2015-11-01"),]
merged.2015 <- merged[merged$Aasta == 2015 & (merged$timestamp2 < as.POSIXlt("2015-09-01") | merged$timestamp2 > as.POSIXlt("2015-12-25")),]
plot(merged.2015$timestamp2,rep(1, length(merged.2015$timestamp2)), type= "h")
merged.2014 <- merged[merged$Aasta == 2014 & (merged$timestamp2 < as.POSIXlt("2014-09-15") | merged$timestamp2 > as.POSIXlt("2014-12-25")),]
plot(merged.2014$timestamp2,rep(1, length(merged.2014$timestamp2)), type= "h")
hist(merged.2014$timestamp2, "months", freq=TRUE)
hist(merged.2015$timestamp2, "months", freq=TRUE)
merged.2013 <- merged[merged$Aasta == 2013,]
merged.cont <- merged[(merged$timestamp2 < as.POSIXlt("2015-09-01") | merged$timestamp2 > as.POSIXlt("2015-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2014-09-01") | merged.cont$timestamp2 > as.POSIXlt("2014-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2013-09-01") | merged.cont$timestamp2 > as.POSIXlt("2013-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2012-09-01") | merged.cont$timestamp2 > as.POSIXlt("2012-12-25")),]
merged.cont <- merged.cont[(merged.cont$timestamp2 < as.POSIXlt("2011-09-01") | merged.cont$timestamp2 > as.POSIXlt("2012-01-25")),]
hist(merged.cont$timestamp2, "months", freq=TRUE)
#http://stackoverflow.com/questions/10770698/understanding-dates-and-plotting-a-histogram-with-ggplot2-in-r
#http://stackoverflow.com/questions/8286763/monthly-time-series-in-r
?rollmean
data.zoo<- zoo(merged$user, merged$timestamp2)
View(merged)
data.zoo<- zoo(merged$user, merged$timestamp2)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo, 3, function(x) length(unique(x["user"])), by.column = FALSE,   align = "left")
data.zoo<- zoo(merged$userid, merged$timestamp2)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollmean(data.zoo, 4)
plot(rollmean(data.zoo, 4))
View(merged)
data.zoo<- zoo(merged$pageid, merged$timestamp2)
time(data.zoo) <- as.yearmon(time(data.zoo))
plot(rollmean(data.zoo, 4))
plot(rollmean(data.zoo, 36))
plot(rollmean(data.zoo, 106))
plot(rollmean(data.zoo, 106))
plot(rollmean(data.zoo, 3))
table <- data.frame(timestamp = c(1,1,1,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(table)
rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(merged$pageid, merged$timestamp2)
data.zoo<- zoo(merged$user, merged$timestamp2)
data.zoo<- zoo(merged$user, merged$timestamp2)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(merged$user, merged$timestamp2)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
table <- data.frame(user = merged$user, timestamp = merged$timestamp2)
data.zoo<- zoo(table)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
table <- data.frame(user = merged$user, timestamp = merged$timestamp)
data.zoo<- zoo(table)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
merged$timestamp
merged$timestamp2
table <- data.frame(user = merged$user, timestamp = merged$timestamp2)
data.zoo<- zoo(table)
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
time(data.zoo) <- as.yearmon(time(data.zoo))
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
table <- data.frame(timestamp = c(1,1,1,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rollapply(data.zoo, 3, function(x) length(unique(x["category"])), by.column = FALSE,   align = "left")
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
table <- data.frame(timestamp = merged$timestamp2, user = merged$user)
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
merged$timestamp2
merged$timestamp
rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(table)
data.zoo
table <- data.frame(timestamp = merged$timestamp, user = merged$revisionid)
View(merged)
table <- data.frame(timestamp = merged$timestamp, user = merged$revid)
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
rolled <- rollapply(data.zoo$user, 1, function(x) length(unique(x)), align = "left", partial = TRUE)
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
data.zoo
rolled <- rollapply(data.zoo$user, 10, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
rolled <- rollapply(data.zoo$user, 108, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
table <- data.frame(timestamp = merged$timestamp, user = as.factor(merged$revid))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 108, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
data.zoo
plot(rollmean(data.zoo, 3))
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
table <- data.frame(timestamp = merged$timestamp, user = merged$user)
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
time(data.zoo) <- as.yearmon(time(data.zoo))
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
rolled
table <- data.frame(timestamp = merged$timestamp, user = merged$user)
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$user, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
rolled
View(merged)
merged$timestamp
table <- data.frame(timestamp = c(1,1,1,3,4,6)+1, category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
table <- data.frame(timestamp = c(2,2,2,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
table <- data.frame(timestamp = c(2,2,2,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
table <- data.frame(timestamp = c(3,3,3,3,4,6), category= c("one", "two", "one", "one", "one", "one"))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
DF <- data.frame(time = 1:4, x = 1:4, f = factor(letters[c(1, 1, 2, 2)]))
zx <- zoo(DF$x, DF$time)
zf <- zoo(DF$f, DF$time)
table[c(2,1)]
table <- data.frame(category= c("one", "two", "one", "one", "one", "one"), timestamp = c(3,3,3,3,4,6))
data.zoo<- zoo(table)
rolled <- rollapply(data.zoo$category, 3, function(x) length(unique(x)), align = "left", partial = TRUE)
plot(rolled)
data.zoo
install.packages("returnanalytics")
library(returnanalytics)
install.packages("PerformanceAnalytics")
table
apply.rolling(table, 2, trim = TRUE, gap = 12, by = 1, FUN = "mean")
library(PerformanceAnalytics)
apply.rolling(table, 2, trim = TRUE, gap = 12, by = 1, FUN = "mean")
table <- data.frame(timestamp = merged$timestamp, revid = as.factor(merged$revid))
apply.rolling(table, 2, trim = TRUE, gap = 12, by = 1, FUN = "mean")
table
apply.rolling(table, 2, trim = TRUE, gap = 12, by = 1, FUN = "mean")
row.names(table) <- as.yearmon(time(merged$timestamp)
row.names(table) <- as.yearmon(time(merged$timestamp))
row.names(table) <- as.yearmon(time(merged$timestamp))
row.names(table)
merged$timestamp
time(merged$timestamp)
as.yearmon((merged$timestamp))
table <- data.frame(timestamp = merged$timestamp, user = merged$user)
data.zoo<- zoo(table)
time(data.zoo)
time(data.zoo) <- as.yearmon(time(data.zoo))
time(data.zoo)
table <- data.frame(row.names = merged$timestamp, user = merged$user)
data.zoo<- zoo(table)
as.yearmon(time(data.zoo))
data.zoo
table <- data.frame(time = merged$timestamp, user = merged$user)
data.zoo<- zoo(table)
?zoo
plot(merged_table$timestamp2,rep(1, length(merged_table$timestamp2)), type= "h")
library(vioplot)
install.packages("vioplot")
library(vioplot)
vioplot(merged_table$timestamp2)
vioplot(merged_table$timestamp3)
vioplot(merged_table$timestamp)
vioplot(merged_table$timestamp2)
merged_table$timestamp2
n <- 30
w <- 7
data <- rep(1:n, rpois(n, 2))
date.table <- table(factor(data, levels=1:n))
mat <- diag(n)
for (i in 2:w){
dim <- n+i-1
mat <- mat + diag(dim)[-((n+1):dim),-(1:(i-1))]
}
roll.mean.7days <- date.table %*% mat
roll.mean.7days
rep(1:n, rpois(n, 2))
install.packages("xts")
x <- structure(c(867L, 891L, 901L, 991L, 1085L, 1114L, 1117L, 1151L,
1174L, 1268L, 1384L, 1403L, 1550L, 1596L, 1608L), .Dim = c(15L, 1L),
index = structure(c(1280960887, 1280964672, 1280966285,
1280997350, 1281014882, 1281017687, 1281018106, 1281023184, 1281025529,
1281050369, 1281096942, 1281108126, 1281176749, 1281207496, 1281215744),
tzone = "", tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", "POSIXt"),
.indexTZ = "", tzone = "")
View(x)
x
xd <- apply.daily(x, length)
library(xts)
View(x)
xd <- apply.daily(x, length)
x2d <- rollapply(xd, 2, sum)
y <- align.time(x2d, n=60*60*24)  # n is in seconds
y
table
df <- table
xts(df[,2],order.by=as.Date(df[,1]))
xts_1 <- xts(df[,2],order.by=as.Date(df[,1]))
xd <- apply.daily(xts_1, length)
x2d <- rollapply(xd, 2, sum)
y <- align.time(x2d, n=60*60*24)  # n is in seconds
y
date.table <- table(factor(data, levels=1:n))
data
x <- structure(c(867L, 891L, 901L, 991L, 1085L, 1114L, 1117L, 1151L,
1174L, 1268L, 1384L, 1403L, 1550L, 1596L, 1608L), .Dim = c(15L, 1L),
index = structure(c(1280960887, 1280964672, 1280966285,
1280997350, 1281014882, 1281017687, 1281018106, 1281023184, 1281025529,
1281050369, 1281096942, 1281108126, 1281176749, 1281207496, 1281215744),
tzone = "", tclass = c("POSIXct", "POSIXt")), class = c("xts", "zoo"),
.indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", "POSIXt"),
.indexTZ = "", tzone = "")
x
data <- sample(seq(as.POSIXct("2012/01/01"),as.POSIXct("2012/01/31"),by="hours"), 30)
date.table <- table(cut(data,"days"))
mat <- diag(n)
for (i in 2:w){
dim <- n+i-1
mat <- mat + diag(dim)[-((n+1):dim),-(1:(i-1))]
}
roll.mean.7days <- date.table %*% mat
roll.mean.7days
date.table
date.table <- table(cut(merged$timestamp2,"days"))
date.table
date.table <- table(cut(merged$timestamp2,"months"))
date.table
plot(date.table)
mat <- diag(n)
for (i in 2:w){
dim <- n+i-1
mat <- mat + diag(dim)[-((n+1):dim),-(1:(i-1))]
}
View(mat)
cut(merged$timestamp2,"months")
merged$timecut <- cut(merged$timestamp2,"months")
merged$timecut
?table
table <- data.frame(time = merged$timecut, user = merged$user)
table(table)
table
table(table$table)
table(table$ttime)
table(table$time)
table.unique <- (unique(table))
table(table$time)
plot(table(table$time))
unique(table)
plot(table(table.unique$time))
plot(table(table.unique$time))
merged$timecut <- cut(merged$timestamp2,"months")
table <- data.frame(time = merged$timecut, user = merged$user)
table(table$time)
table.unique <- (unique(table))
plot(table(table.unique$time))
table <- data.frame(time = merged$timecut, user = merged$revid)
table(table$time)
table.unique <- (unique(table))
plot(table(table.unique$time))
contribs <- read.csv("allusers_20.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
View(concise)
contribs <- read.csv("contribs_all.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
contribs <- read.csv("allusers_dump_14.01.2016.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
View(contribs)
contribs <- read.csv("contribs_all_archived.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
View(contribs)
contribs[user == 'Metsavend']
contribs[contribs$user == 'Metsavend']
contribs <- read.csv("contribs_all_dump_14.01.2016.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
contribs[contribs$user == 'Metsavend']
contribs[contribs$user == 'Metsavend',]
contribs$timestamp2 <- as.POSIXct(contribs$timestamp, origin="1970-01-01")
contribs[contribs$user == 'Metsavend',]
summary(contribs$timestamp2)
summary(contribs$user)
?as.POSIXct
as.POSIXlt(1970-01-01)
as.POSIXlt(1970-01-01, origin= 1970-01-01)
as.POSIXlt(1970-01-01, origin= "1970-01-01")
contribs <- read.csv("contribs_all_max2.csv", header = TRUE, sep = "@", quote = "\"", dec = ".", fill = TRUE, comment.char = "", encoding="UTF-8")
contribs$timestamp2 <- as.POSIXct(contribs$timestamp, origin="1970-01-01")
View(contribs)
contribs[contribs$title=="Valimisringkond nr 6"]
contribs[contribs$title=="Valimisringkond nr 6",]
contribs[contribs$title=="Valimisringkond nr 6",[c('pageid','title','timestamp','userid','revid','user', 'size', 'sizediff')]]
contribs[contribs$title=="Valimisringkond nr 6",c('pageid','title','timestamp','userid','revid','user', 'size', 'sizediff')]
